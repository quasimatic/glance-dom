!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=7)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LogLevels={error:0,warn:1,info:2,debug:3,trace:4};exports.default={level:LogLevels.error,setLogLevel:function(level){this.level=LogLevels[level]},error:function(){for(var _len=arguments.length,messages=Array(_len),_key=0;_key<_len;_key++)messages[_key]=arguments[_key];this._log("error",messages)},warn:function(){for(var _len2=arguments.length,messages=Array(_len2),_key2=0;_key2<_len2;_key2++)messages[_key2]=arguments[_key2];this._log("warn",messages)},info:function(){for(var _len3=arguments.length,messages=Array(_len3),_key3=0;_key3<_len3;_key3++)messages[_key3]=arguments[_key3];this._log("info",messages)},debug:function(){for(var _len4=arguments.length,messages=Array(_len4),_key4=0;_key4<_len4;_key4++)messages[_key4]=arguments[_key4];this._log("debug",messages)},trace:function(){for(var _len5=arguments.length,messages=Array(_len5),_key5=0;_key5<_len5;_key5++)messages[_key5]=arguments[_key5];this._log("trace",messages)},_log:function(level,messages){LogLevels[level]<=this.level&&console.log(messages.join(" "))}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Extensions=function(){function Extensions(){var extensions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,Extensions),this.extensions=extensions}return _createClass(Extensions,[{key:"add",value:function(extension){this.extensions=this.extensions.concat(extension)}},{key:"getLocatorForLabel",value:function(text){var labels=Extensions.labels(this.extensions),label=labels[text];return label?this.getLocator(label.locate||label):function(){return[]}}},{key:"getLocatorForOption",value:function(name,label){var options=Extensions.options(this.extensions),option=options[name];return option?this.getLocator(option.locate):this.getDynamicLocator(name,label)}},{key:"getDynamicLocator",value:function(option,label){var catchAlls=this.extensions.filter(function(e){return!!e.locator&&e.locator.check({label:label,option:option})}).map(function(e){return e.locator.locate});if(catchAlls.length>0)return function(data){return catchAlls.reduce(function(result,locate){return result.concat(locate(data))},[])}}},{key:"getLocator",value:function(locator){return"[object Array]"===Object.prototype.toString.call(locator)?function(_ref){var glanceDOM=_ref.glanceDOM;return locator.reduce(function(result,label){return result.concat(glanceDOM(label),[])},[])}:"string"==typeof locator?function(_ref2){return(0,_ref2.glanceDOM)(locator)}:"function"==typeof locator?locator:function(){return[]}}},{key:"getFilterForOption",value:function(name,label){var options=Extensions.options(this.extensions),option=options[name];return option?"function"==typeof option?option:option.filter:this.getDynamicFilter(name,label)}},{key:"getDynamicFilter",value:function(option,label){var catchAlls=this.extensions.filter(function(e){return!!e.filter&&e.filter.check({label:label,option:option})}).map(function(e){return e.filter.filter});if(catchAlls.length>0)return function(data){return catchAlls.reduce(function(result,filter){return result.concat(filter(data))},[])}}},{key:"getExtensions",value:function(){return this.extensions}},{key:"getLabels",value:function(){return Extensions.labels(this.extensions)}},{key:"getOptions",value:function(){return Extensions.options(this.extensions)}},{key:"getBeforeAllHooks",value:function(){return this.extensions.filter(function(e){return e.beforeAll}).map(function(e){return e.beforeAll})}},{key:"getAfterAllHooks",value:function(){return this.extensions.filter(function(e){return e.afterAll}).map(function(e){return e.afterAll})}}],[{key:"labels",value:function(extensions){return extensions.filter(function(e){return e.labels}).reduce(function(l,e){return Object.assign(l,e.labels)},{})}},{key:"options",value:function(extensions){return extensions.filter(function(e){return e.options}).reduce(function(l,e){var inverses=Object.keys(e.options).reduce(function(r,k){return e.options[k].inverse&&(r[e.options[k].inverse]={inverse:k,filter:function(data,inverse){return e.options[k].filter(data,!inverse)}}),r},{});return _extends({},l,e.options,inverses)},{})}}]),Extensions}();exports.default=Extensions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(selector,containerElement){try{var results=[];return(0,_matches2.default)(selector,containerElement)&&results.push(containerElement),results.concat(Array.prototype.slice.apply(containerElement.querySelectorAll(selector)))}catch(e){if(e instanceof DOMException)return[];throw e}};var _matches=__webpack_require__(28),_matches2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_matches)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(label,containerElement){for(var results=[],xpathResult=document.evaluate(label,containerElement,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),i=0;i<xpathResult.snapshotLength;i++)results.push(xpathResult.snapshotItem(i));return results}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(elements,containerElements){var includeSelf=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],containerLookup=new Set(containerElements);return elements.reduce(function(result,element){for(var parent=includeSelf?element:element.parentNode,parents=[];null!==parent&&null!==parent.outerHTML&&(parents.push(parent),!containerLookup.has(parent));)parent=parent.parentNode;return result.push(parents),result},[])}},function(module,exports,__webpack_require__){"use strict";function peg$SyntaxError(message,expected,found,location){this.message=message,this.expected=expected,this.found=found,this.location=location,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(input,options){function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){var p,details=peg$posDetailsCache[pos];if(details)return details;for(p=pos-1;!peg$posDetailsCache[p];)p--;for(details=peg$posDetailsCache[p],details={line:details.line,column:details.column};p<pos;)10===input.charCodeAt(p)?(details.line++,details.column=1):details.column++,p++;return peg$posDetailsCache[pos]=details,details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){peg$currPos<peg$maxFailPos||(peg$currPos>peg$maxFailPos&&(peg$maxFailPos=peg$currPos,peg$maxFailExpected=[]),peg$maxFailExpected.push(expected))}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parseGlanceReference(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parseScope())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseScope();else s1=peg$FAILED;if(s1!==peg$FAILED?(s2=peg$parseSubject(),s2===peg$FAILED&&(s2=null),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c0(s1,s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,s1=peg$parseSubject(),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c1(s1)),(s0=s1)===peg$FAILED)){for(s0=peg$currPos,s1=[],input.length>peg$currPos?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c2));s2!==peg$FAILED;)s1.push(s2),input.length>peg$currPos?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c2));s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c3()),s0=s1}return s0}function peg$parseScopeChar(){var s0;return 62===input.charCodeAt(peg$currPos)?(s0=peg$c4,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c5)),s0}function peg$parseIntersectChar(){var s0;return 94===input.charCodeAt(peg$currPos)?(s0=peg$c6,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c7)),s0}function peg$parseOptionChar(){var s0;return 35===input.charCodeAt(peg$currPos)?(s0=peg$c8,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c9)),s0}function peg$parseSeparatorChar(){var s0;return 44===input.charCodeAt(peg$currPos)?(s0=peg$c10,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c11)),s0}function peg$parseScope(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parseIntersection())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIntersection();else s1=peg$FAILED;return s1!==peg$FAILED?(s2=peg$parseScopeChar(),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c12(s1),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseSubject(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parseIntersection())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIntersection();else s1=peg$FAILED;return s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c12(s1)),s0=s1}function peg$parseIntersection(){var s0,s1,s2;return s0=peg$currPos,s1=peg$parseTarget(),s1!==peg$FAILED?(s2=peg$parseIntersectChar(),s2===peg$FAILED&&(s2=null),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c13(s1),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseTarget(){var s0,s1,s2,s3;if(s0=peg$currPos,s1=[],(s2=peg$parseLabelCharacter())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseLabelCharacter();else s1=peg$FAILED;return s1!==peg$FAILED?(s2=peg$parseOptions(),s2===peg$FAILED&&(s2=null),s2!==peg$FAILED?(s3=peg$parseWhitespace(),s3===peg$FAILED&&(s3=null),s3!==peg$FAILED?(peg$savedPos=s0,s1=peg$c14(s1,s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,s1=peg$parseOptions(),s1!==peg$FAILED?(s2=peg$parseWhitespace(),s2===peg$FAILED&&(s2=null),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c15(s1),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)),s0}function peg$parseLabelCharacter(){var s0,s1,s2;return s0=peg$currPos,s1=peg$currPos,peg$silentFails++,s2=peg$parseEscapableChars(),peg$silentFails--,s2===peg$FAILED?s1=void 0:(peg$currPos=s1,s1=peg$FAILED),s1!==peg$FAILED?(input.length>peg$currPos?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c2)),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c16(s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$parseEscapedSequence()),s0}function peg$parseOptions(){var s0,s1,s2,s3,s4;if(s0=peg$currPos,(s1=peg$parseOptionChar())!==peg$FAILED)if(s2=peg$parseOptionChar(),s2===peg$FAILED&&(s2=null),s2!==peg$FAILED){for(s3=[],s4=peg$parseOption();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseOption();s3!==peg$FAILED?(peg$savedPos=s0,s1=peg$c17(s2,s3),s0=s1):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseOption(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parseCharacter())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseCharacter();else s1=peg$FAILED;return s1!==peg$FAILED?(s2=peg$parseOptionSeparatorChar(),s2===peg$FAILED&&(s2=null),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c18(s1),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseOptionSeparatorChar(){var s0;return s0=peg$parseOptionChar(),s0===peg$FAILED&&(s0=peg$parseSeparatorChar()),s0}function peg$parseEscapeChar(){var s0;return 92===input.charCodeAt(peg$currPos)?(s0=peg$c19,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c20)),s0}function peg$parseEscapableChars(){var s0;return s0=peg$parseEscapeChar(),s0===peg$FAILED&&(s0=peg$parseScopeChar())===peg$FAILED&&(s0=peg$parseOptionChar())===peg$FAILED&&(s0=peg$parseIntersectChar()),s0}function peg$parseEscapedSequence(){var s0,s1,s2;return s0=peg$currPos,s1=peg$parseEscapeChar(),s1!==peg$FAILED?(s2=peg$parseEscapableChars(),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c16(s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseCharacter(){var s0,s1,s2;return s0=peg$currPos,s1=peg$currPos,peg$silentFails++,s2=peg$parseEscapableChars(),s2===peg$FAILED&&(s2=peg$parseSeparatorChar()),peg$silentFails--,s2===peg$FAILED?s1=void 0:(peg$currPos=s1,s1=peg$FAILED),s1!==peg$FAILED?(input.length>peg$currPos?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c2)),s2!==peg$FAILED?(peg$savedPos=s0,s1=peg$c16(s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseWhitespace(){var s0,s1;if(s0=[],peg$c21.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22)),s1!==peg$FAILED)for(;s1!==peg$FAILED;)s0.push(s1),peg$c21.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22));else s0=peg$FAILED;return s0}options=void 0!==options?options:{};var peg$result,peg$FAILED={},peg$startRuleFunctions={GlanceReference:peg$parseGlanceReference},peg$startRuleFunction=peg$parseGlanceReference,peg$c0=function(scopes,subject){return subject?scopes.concat([subject]):scopes},peg$c1=function(subject){return[subject]},peg$c2=function(){return{type:"any"}}(),peg$c3=function(){return[]},peg$c4=">",peg$c5=peg$literalExpectation(">",!1),peg$c6="^",peg$c7=peg$literalExpectation("^",!1),peg$c8="#",peg$c9=peg$literalExpectation("#",!1),peg$c10=",",peg$c11=peg$literalExpectation(",",!1),peg$c12=function(intersections){return intersections},peg$c13=function(target){return target},peg$c14=function(label,options){return{label:label.join("").trim(),options:options?options.options:[],useDefaultOptions:!options||options.useDefaultOptions}},peg$c15=function(options){return{options:options||[]}},peg$c16=function(c){return c},peg$c17=function(useDefaultOptions,options){return{options:options,useDefaultOptions:!useDefaultOptions}},peg$c18=function(name){return name.join("").trim()},peg$c19="\\",peg$c20=peg$literalExpectation("\\",!1),peg$c21=/^[ \t\r\n]/,peg$c22=function(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}([" ","\t","\r","\n"],!1,!1),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}if((peg$result=peg$startRuleFunction())!==peg$FAILED&&peg$currPos===input.length)return peg$result;throw peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail(function(){return{type:"end"}}()),peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}!function(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor}(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(expected,found){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function describeExpectation(expectation){return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation)}var DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function(expectation){var i,escapedParts="";for(i=0;i<expectation.parts.length;i++)escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i]);return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function(expectation){return"any character"},end:function(expectation){return"end of input"},other:function(expectation){return expectation.description}};return"Expected "+function(expected){var i,j,descriptions=new Array(expected.length);for(i=0;i<expected.length;i++)descriptions[i]=describeExpectation(expected[i]);if(descriptions.sort(),descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++)descriptions[i-1]!==descriptions[i]&&(descriptions[j]=descriptions[i],j++);descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}(expected)+" but "+function(found){return found?'"'+literalEscape(found)+'"':"end of input"}(found)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createglanceDOM(){var _this=this;return this.extensions=new _extensions2.default(_default2.default),this.selector=function(){var reference=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_requiredParameter2.default)("Selector required"),config=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_config$containerElem=config.containerElements,containerElements=void 0===_config$containerElem?[document.documentElement]:_config$containerElem,preprocessor=new _preprocessor2.default({extensions:_this.extensions,defaultOptions:_defaultOptions2.default}),commands=preprocessor.create(reference);return(0,_processor2.default)({commands:commands,extensions:_this.extensions,glanceDOM:_this.selector,containerElements:containerElements,reference:reference})},this.selector.addExtension=function(extension){_this.extensions.add(extension)},this.selector.setLogLevel=function(level){_log2.default.setLogLevel(level)},this.selector}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultOptions=exports.DefaultExtensions=exports.Parser=void 0;var _preprocessor=__webpack_require__(10),_preprocessor2=_interopRequireDefault(_preprocessor),_extensions=__webpack_require__(1),_extensions2=_interopRequireDefault(_extensions),_default=__webpack_require__(12),_default2=_interopRequireDefault(_default),_defaultOptions=__webpack_require__(11),_defaultOptions2=_interopRequireDefault(_defaultOptions),_processor=__webpack_require__(27),_processor2=_interopRequireDefault(_processor),_requiredParameter=__webpack_require__(29),_requiredParameter2=_interopRequireDefault(_requiredParameter),_glanceParser=__webpack_require__(5),_glanceParser2=_interopRequireDefault(_glanceParser),_log=__webpack_require__(0),_log2=_interopRequireDefault(_log);exports.default=new createglanceDOM,exports.Parser=_glanceParser2.default,exports.DefaultExtensions=_default2.default,exports.DefaultOptions=_defaultOptions2.default},function(module,exports,__webpack_require__){"use strict";var _glance=__webpack_require__(6),_glance2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_glance);window.glanceDOM=_glance2.default},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extensions=__webpack_require__(1),_extensions2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_extensions),FilterPreprocessor=function(){function FilterPreprocessor(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{extensions:new _extensions2.default,defaultOptions:[]},_ref$extensions=_ref.extensions,extensions=void 0===_ref$extensions?new _extensions2.default:_ref$extensions,_ref$defaultOptions=_ref.defaultOptions,defaultOptions=void 0===_ref$defaultOptions?[]:_ref$defaultOptions;_classCallCheck(this,FilterPreprocessor),this.extensions=extensions,this.defaultOptions=defaultOptions}return _createClass(FilterPreprocessor,[{key:"getFilterCommands",value:function(target){var extensions=this.extensions,locators=[],labels=extensions.getLabels();return labels[target.label]&&"[object Array]"!==Object.prototype.toString.call(labels[target.label])&&labels[target.label].filter&&(locators=[{command:"filter",option:"custom-label",label:target.label}]),this.filtersFromOptions(target,locators,extensions)}},{key:"filtersFromOptions",value:function(target,locators,extensions){extensions.getOptions();return this.configureOptionsWithFilters(target).options.forEach(function(name){return locators.push({command:"filter",option:name,label:target.label})}),locators}},{key:"configureOptionsWithFilters",value:function(target){var extensions=this.extensions,defaultOptions=this.defaultOptions,options=extensions.getOptions(),possibleOptions=target.options,validOptions=[],inverses=possibleOptions.reduce(function(r,o){return options[o]&&options[o].inverse?r.concat(options[o].inverse):r},[]),defaultOptionsWithoutInverse=defaultOptions.filter(function(d){return-1===inverses.indexOf(d)&&-1===possibleOptions.indexOf(d)});return defaultOptionsWithoutInverse.length>0&&(possibleOptions=defaultOptionsWithoutInverse.concat(possibleOptions)),possibleOptions.forEach(function(name){if(options[name]&&("function"==typeof options[name]||options[name].filter))"function"!=typeof options[name]&&options[name].inverse&&target.options.indexOf(name)>-1&&target.options.indexOf(options[name].inverse)>-1||(validOptions=validOptions.concat(name));else{extensions.getExtensions().filter(function(e){return!!e.filter&&e.filter.check({label:target.label,option:name})}).length>0&&(validOptions=validOptions.concat(name))}}),_extends({},target,{options:validOptions})}}]),FilterPreprocessor}();exports.default=FilterPreprocessor},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extensions=__webpack_require__(1),_extensions2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_extensions),LocatorPreprocessor=function(){function LocatorPreprocessor(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{extensions:new _extensions2.default,defaultOptions:[]},_ref$extensions=_ref.extensions,extensions=void 0===_ref$extensions?new _extensions2.default:_ref$extensions,_ref$defaultOptions=_ref.defaultOptions,defaultOptions=void 0===_ref$defaultOptions?[]:_ref$defaultOptions;_classCallCheck(this,LocatorPreprocessor),this.extensions=extensions,this.defaultOptions=defaultOptions}return _createClass(LocatorPreprocessor,[{key:"getLocatorCommands",value:function(target){var extensions=this.extensions,locators=[],labels=extensions.getLabels();return("object"===_typeof(labels[target.label])&&labels[target.label].locate||labels[target.label])&&(locators=[{command:"locate",option:"custom-label",label:target.label}]),this.locatorsFromOptions(target,locators,extensions)}},{key:"locatorsFromOptions",value:function(target,locators,extensions){return this.configureOptionsWithLocators(target).options.forEach(function(name){return locators.push({command:"locate",option:name,label:target.label})}),locators}},{key:"configureOptionsWithLocators",value:function(target){var extensions=this.extensions,defaultOptions=this.defaultOptions,options=extensions.getOptions(),possibleOptions=target.options,validOptions=[];return defaultOptions.length>0&&(possibleOptions=defaultOptions.concat(possibleOptions)),possibleOptions.forEach(function(name){if(options[name]&&options[name].locate)validOptions=validOptions.concat(name);else{var catchAlls=extensions.getExtensions().filter(function(e){return!!e.locator&&e.locator.check({label:target.label,option:name})});catchAlls.length>0&&(validOptions=validOptions.concat(catchAlls.map(function(e){return name})))}}),_extends({},target,{options:validOptions})}}]),LocatorPreprocessor}();exports.default=LocatorPreprocessor},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_glanceParser=__webpack_require__(5),_glanceParser2=_interopRequireDefault(_glanceParser),_locatorPreprocessor=__webpack_require__(9),_locatorPreprocessor2=_interopRequireDefault(_locatorPreprocessor),_filterPreprocessor=__webpack_require__(8),_filterPreprocessor2=_interopRequireDefault(_filterPreprocessor),_extensions=__webpack_require__(1),_extensions2=_interopRequireDefault(_extensions),Preprocessor=function(){function Preprocessor(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{extensions:new _extensions2.default,defaultOptions:[]},_ref$extensions=_ref.extensions,extensions=void 0===_ref$extensions?new _extensions2.default:_ref$extensions,_ref$defaultOptions=_ref.defaultOptions,defaultOptions=void 0===_ref$defaultOptions?[]:_ref$defaultOptions;_classCallCheck(this,Preprocessor),this.extensions=extensions,this.defaultOptions=defaultOptions}return _createClass(Preprocessor,[{key:"create",value:function(reference){var _this=this;this.targetCount=0;var scopes=_glanceParser2.default.parse(reference),totalTargets=scopes.reduce(function(total,s){return total+s.length},0),commands=[];return this.extensions.getBeforeAllHooks().length>0&&commands.push({command:"beforeall"}),commands=commands.concat(scopes.reduce(function(result,scope){return result.concat({command:"containers"},_this.processIntersect(scope,totalTargets))},[])),this.extensions.getAfterAllHooks().length>0&&commands.push({command:"afterall"}),commands}},{key:"processIntersect",value:function(intersects,totalTargets){var _this2=this,result=intersects.reduce(function(result,target,index){return result.concat(_this2.locators(target,_this2.targetCount+index,totalTargets),_this2.filters(target,_this2.targetCount+index,totalTargets),{command:"intersect"})},[]);return this.targetCount+=intersects.length,result}},{key:"locators",value:function(target,targetIndex,totalTargets){return new _locatorPreprocessor2.default(this).getLocatorCommands(target).map(function(c){return _extends({},c,{targetIndex:targetIndex,totalTargets:totalTargets})})}},{key:"filters",value:function(target,targetIndex,totalTargets){return new _filterPreprocessor2.default(this).getFilterCommands(target).map(function(c){return _extends({},c,{targetIndex:targetIndex,totalTargets:totalTargets})})}}]),Preprocessor}();exports.default=Preprocessor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=["custom-label","contains-text","value","attribute-placeholder","attribute-name","attribute-id","class","attribute-alt","attribute-type","node-type","visible","leaf-node-target","input-after","shortest-path","index"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _customLabel=__webpack_require__(22),_customLabel2=_interopRequireDefault(_customLabel),_containsText=__webpack_require__(20),_containsText2=_interopRequireDefault(_containsText),_exactText=__webpack_require__(23),_exactText2=_interopRequireDefault(_exactText),_value=__webpack_require__(25),_value2=_interopRequireDefault(_value),_class=__webpack_require__(19),_class2=_interopRequireDefault(_class),_nodeType=__webpack_require__(24),_nodeType2=_interopRequireDefault(_nodeType),_css=__webpack_require__(21),_css2=_interopRequireDefault(_css),_attribute=__webpack_require__(18),_attribute2=_interopRequireDefault(_attribute),_visible=__webpack_require__(17),_visible2=_interopRequireDefault(_visible),_leafNodeTarget=__webpack_require__(15),_leafNodeTarget2=_interopRequireDefault(_leafNodeTarget),_inputAfter=__webpack_require__(14),_inputAfter2=_interopRequireDefault(_inputAfter),_shortestPath=__webpack_require__(16),_shortestPath2=_interopRequireDefault(_shortestPath),_index=__webpack_require__(13),_index2=_interopRequireDefault(_index);exports.default=[_customLabel2.default,_containsText2.default,_exactText2.default,_value2.default,_class2.default,_attribute2.default,_nodeType2.default,_css2.default,_visible2.default,_leafNodeTarget2.default,_inputAfter2.default,_shortestPath2.default,_index2.default]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log=__webpack_require__(0),_log2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log);exports.default={filter:{check:function(_ref){var option=_ref.option;return null!==option&&!isNaN(option)},filter:function(_ref2){var elements=_ref2.elements,option=_ref2.option;if(_log2.default.debug("Filtering by index"),null!==option&&!isNaN(option)){var position=parseInt(option);if(_log2.default.debug("Selecting the",position,"element out of",elements.length),position<=0)throw new Error("Positions start at 1");if(elements.length<position)throw new Error("Position "+position+" out of range");return[elements[position-1]]}return elements}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log=__webpack_require__(0),_log2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log);exports.default={options:{"input-after":{filter:function(_ref){var elements=_ref.elements,_ref$scopeElements=_ref.scopeElements,scopeElements=void 0===_ref$scopeElements?[]:_ref$scopeElements;_log2.default.debug("Filtering for sibling input next to scope");var siblings=elements.filter(function(e){return"input"===e.nodeName.toLowerCase()&&(e.previousElementSibling&&"input"!==e.previousElementSibling.nodeName.toLowerCase()&&-1!==scopeElements.indexOf(e.previousElementSibling))});return 0===siblings.length?elements:siblings}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log=__webpack_require__(0),_log2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log);exports.default={options:{"leaf-node-target":{filter:function(_ref){var elements=_ref.elements,_ref$targetIndex=_ref.targetIndex,targetIndex=void 0===_ref$targetIndex?0:_ref$targetIndex,_ref$totalTargets=_ref.totalTargets,totalTargets=void 0===_ref$totalTargets?1:_ref$totalTargets;if(_log2.default.debug("Filtering for leaf node targets"),targetIndex+1!==totalTargets)return elements;var filteredElements=elements.filter(function(e){return!e.childNodes||0===e.childNodes.length||[].slice.call(e.childNodes).every(function(c){return c.nodeType===Node.TEXT_NODE})});return 0===filteredElements.length?elements:filteredElements}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log=__webpack_require__(0),_log2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log);exports.default={options:{"shortest-path":{filter:function(_ref){function addToLookup(element,distance){elementsForDistance.push(element);var i=elementsForDistance.indexOf(element);distanceToScopeLookup[i]=distance}function lookup(element){var i=elementsForDistance.indexOf(element);return-1===i?null:distanceToScopeLookup[i]}function siblingDistanceToParent(element){return Array.prototype.indexOf.call(element.parentNode.childNodes,element)}var elements=_ref.elements,_ref$containerElement=_ref.containerElements,containerElements=void 0===_ref$containerElement?[document.documentElement]:_ref$containerElement,_ref$scopeElements=_ref.scopeElements,scopeElements=void 0===_ref$scopeElements?[]:_ref$scopeElements;_ref.target;_log2.default.debug("Filtering for shortest scope and target");var containerLookup=new Set(containerElements.map(function(c){return c.parentNode})),elementsForDistance=[],distanceToScopeLookup={};if(0===scopeElements.length)return elements;scopeElements.forEach(function(v){for(var p=v,i=0;null!==p&&null!==p.outerHTML;){var distanceToScope=lookup(p);if((!distanceToScope||i<distanceToScope)&&addToLookup(p,i),++i,p=p.parentNode,containerLookup.has(p))break}});var closestLevel=-1,closestElements=[];return elements.forEach(function(element){for(var parent=element,distanceToScope=lookup(parent),distance=0;(-1===closestLevel||!distanceToScope||distanceToScope+distance<=closestLevel)&&null!==parent&&null!==parent.outerHTML;){if(distanceToScope||0===distanceToScope){distanceToScope+=distance,distanceToScope<closestLevel&&(closestElements=[]),closestLevel=distanceToScope,closestElements.push(element);break}if(distance=Math.max(siblingDistanceToParent(parent),distance),parent=parent.parentNode,containerLookup.has(parent))break;distanceToScope=lookup(parent)}}),closestElements}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log=__webpack_require__(0),_log2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log);exports.default={options:{visible:{inverse:"hidden",filter:function(_ref){var elements=_ref.elements,inverse=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _log2.default.debug("Filtering for visible elements"),elements.filter(function(e){if(inverse){var _style=window.getComputedStyle(e);return"none"===_style.display||"hidden"===_style.visibility}if("option"===e.tagName.toLowerCase()||e.offsetParent)return!0;var style=window.getComputedStyle(e);return"fixed"===style.position&&"none"!==style.display&&"hidden"!==style.visibility})}}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _xpath=__webpack_require__(3),_xpath2=_interopRequireDefault(_xpath),_log=__webpack_require__(0),_log2=_interopRequireDefault(_log);exports.default={locator:{check:function(_ref){var option=_ref.option;return isNaN(option)&&option.indexOf("attribute-")>-1},locate:function(_ref2){var label=_ref2.label,option=_ref2.option,containerElements=_ref2.containerElements;return isNaN(option)&&option.indexOf("attribute-")>-1?containerElements.reduce(function(totalResult,containerElement){var key=option.slice("attribute-".length);_log2.default.debug("Searching "+key+" attribute:",label);var result=(0,_xpath2.default)(".//*[contains(translate(@"+key+", 'ABCDEFGHJIKLMNOPQRSTUVWXYZ', 'abcdefghjiklmnopqrstuvwxyz'), translate('"+label+"', 'ABCDEFGHJIKLMNOPQRSTUVWXYZ', 'abcdefghjiklmnopqrstuvwxyz'))]",containerElement);return totalResult.concat(result)},[]):[]}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _css=__webpack_require__(2),_css2=_interopRequireDefault(_css),_log=__webpack_require__(0),_log2=_interopRequireDefault(_log);exports.default={options:{class:{locate:function(_ref){var label=_ref.label,containerElements=_ref.containerElements;return _log2.default.debug("Searching as class name:",label),containerElements.reduce(function(result,containerElement){return result.concat((0,_css2.default)("."+label,containerElement))},[])}}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _xpath=__webpack_require__(3),_xpath2=_interopRequireDefault(_xpath),_log=__webpack_require__(0),_log2=_interopRequireDefault(_log),_parentElements=__webpack_require__(4),_parentElements2=_interopRequireDefault(_parentElements);exports.default={options:{"contains-text":{locate:function(_ref){var label=_ref.label,containerElements=_ref.containerElements;_log2.default.debug("Searching for text that contains:",label);var results=containerElements.reduce(function(result,containerElement){return result.concat((0,_xpath2.default)(".//*[text()]/../*[not(descendant-or-self::script) and not(descendant-or-self::noscript) and not(descendant-or-self::style) and contains(translate(normalize-space(string(.)), 'ABCDEFGHJIKLMNOPQRSTUVWXYZ', 'abcdefghjiklmnopqrstuvwxyz'),translate('"+label+"', 'ABCDEFGHJIKLMNOPQRSTUVWXYZ', 'abcdefghjiklmnopqrstuvwxyz'))]",containerElement))},[]),lookup=new Set([].concat.apply([],(0,_parentElements2.default)(results,containerElements,!1)));return results.filter(function(r){return!lookup.has(r)})}}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _css=__webpack_require__(2),_css2=_interopRequireDefault(_css),_log=__webpack_require__(0),_log2=_interopRequireDefault(_log);exports.default={options:{css:{locate:function(_ref){var label=_ref.label,containerElements=_ref.containerElements;return _log2.default.debug("Searching as css:",label),containerElements.reduce(function(result,containerElement){return result.concat((0,_css2.default)(""+label,containerElement))},[])}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log=__webpack_require__(0),_log2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log);exports.default={options:{"custom-label":{locate:function(data){var label=data.label,extensions=data.extensions;return _log2.default.debug("Searching by label extension:",label),[].concat(extensions.getLocatorForLabel(label)(data))}}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _xpath=__webpack_require__(3),_xpath2=_interopRequireDefault(_xpath),_log=__webpack_require__(0),_log2=_interopRequireDefault(_log);exports.default={options:{"exact-text":{locate:function(_ref){var label=_ref.label,containerElements=_ref.containerElements;return _log2.default.debug("Searching for text that exact matches:",label),containerElements.reduce(function(result,containerElement){return result.concat((0,_xpath2.default)(".//*[not(self::script) and text()='"+label+"']",containerElement))},[])}}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _css=__webpack_require__(2),_css2=_interopRequireDefault(_css),_log=__webpack_require__(0),_log2=_interopRequireDefault(_log);exports.default={options:{"node-type":{locate:function(_ref){var label=_ref.label,containerElements=_ref.containerElements;return _log2.default.debug("Searching by node type:",label),containerElements.reduce(function(result,containerElement){return result.concat((0,_css2.default)(""+label,containerElement))},[])}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log=__webpack_require__(0),_log2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log);exports.default={options:{value:{locate:function(_ref){var label=_ref.label,containerElements=_ref.containerElements;return _log2.default.debug("Searching in value:",label),containerElements.reduce(function(result,scope){var results=scope.querySelectorAll("button,input,option,param"),elements=Array.prototype.slice.apply(results);return result.concat(elements.filter(function(input){return input.value&&-1!==input.value.toLowerCase().indexOf(label.toLowerCase())}))},[])}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(scopeElements,subjectElements,containerElements){var containerLookup=new Set([].concat.apply([],(0,_parentElements2.default)(scopeElements,containerElements)));return(0,_parentElements2.default)(subjectElements,containerElements).map(function(se){return se.find(function(e){return containerLookup.has(e)})})};var _parentElements=__webpack_require__(4),_parentElements2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_parentElements)},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function dispatch(_ref){var command=_ref.command,extensions=_ref.extensions,glanceDOM=_ref.glanceDOM,result=_ref.result,reference=_ref.reference;switch(command.command){case"beforeall":extensions.getBeforeAllHooks().forEach(function(h){return h({reference:reference})});break;case"containers":result.scopeElements&&(result.containerElements=(0,_containers2.default)(result.scopeElements,result.subjectElements)),result.subjectElements&&(result.scopeElements=result.subjectElements),result.targetElements=[],result.subjectElements=[];break;case"intersect":if(result.subjectElements.length>0){var subjectLookup=new Set(result.subjectElements);result.subjectElements=result.targetElements.filter(function(e){return subjectLookup.has(e)})}else result.subjectElements=result.targetElements;result.targetElements=[];break;case"locate":var locator=extensions.getLocatorForOption(command.option,command.label);result.targetElements=result.targetElements.concat(locator(_extends({},command,{extensions:extensions,glanceDOM:glanceDOM,containerElements:result.containerElements}))),result.targetElements=[].concat(_toConsumableArray(new Set(result.targetElements)));break;case"filter":var filter=extensions.getFilterForOption(command.option);result.targetElements=filter(_extends({},command,{extensions:extensions,elements:result.targetElements,scopeElements:result.scopeElements}));break;case"afterall":extensions.getAfterAllHooks().forEach(function(h){return h({reference:reference,elements:result.subjectElements})})}return result}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(_ref2){var _ref2$commands=_ref2.commands,commands=void 0===_ref2$commands?[]:_ref2$commands,extensions=_ref2.extensions,glanceDOM=_ref2.glanceDOM,reference=_ref2.reference,containerElements=_ref2.containerElements,result=commands.reduce(function(result,command){return dispatch({command:command,extensions:extensions,reference:reference,glanceDOM:glanceDOM,result:result})},{containerElements:containerElements});return 1===result.subjectElements.length?result.subjectElements[0]:result.subjectElements};var _containers=__webpack_require__(26),_containers2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_containers)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var matches=document.documentElement.matches||document.documentElement.matchesSelector||document.documentElement.oMatchesSelector||document.documentElement.msMatchesSelector||document.documentElement.mozMatchesSelector||document.documentElement.webkitMatchesSelector;exports.default=function(selector,containerElement){return matches.call(containerElement,selector)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(message){throw new Error(message)}}]);